<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>hhh</title>
</head>
<body>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://d3js.org/topojson.v1.min.js" charset="utf-8"></script>
<script>
    var dataset=[
        {x:1120,y:40,weight:30,color:"#F0FFF0",color2:"#20B2AA",thing:"文化程度"},
        {x:120,y:50,weight:50,color:"#00FFFF",color2:"#98FB98",thing:"年龄分布"},
        {x:110,y:240,weight:30,color:"#E6E6FA",color2:"#FFFFE0",thing:"民族分布"},
        {x:1020,y:350,weight:50,color:"#87CEEB",color2:"#FFFAF0",thing:"职业分布"},
        {x:560,y:140,weight:30,color:"#FFB6C1",color2:"#C0C0C0",thing:"各职业分布"}
    ];
    var main=d3.select('body').append('svg')
            .attr("width",1200)
            .attr("height",1000);
    var node=main.selectAll('node')
        .data(dataset)
        .enter()
        .append("g")
    //.attr('class','node');
    node.append('circle')
        .attr('cx',function(d){
            return 100;
        })
        .attr('cy',function(d){
            return 100;
        })
        .attr('r',function(d){
            return d.weight;
        })
        .attr("fill",function(d){
            return d.color2;
        })
        .transition()//启动过渡
        .duration(2000)//过渡的持续时间，单位毫秒
        .ease("bounce")//过渡的方式：linear：线性变化，circle：慢慢的到达终态，elastic：弹跳的到达，bounce：在终态处弹跳
        .delay(500)//延迟一段时间再开始过渡，单位毫秒.500可换为function（）{。。。}使不同图形的时间不同
        .attr('fill',function(d){
            return d.color;
        })
        .attr('cx',function(d){
            return d.x;
        })
        .attr('cy',function(d){
            return d.y;
        });
    node.append("text")
        .attr("x",function(d){
            return 80;
        })
        .attr("y",function(d){
            return 100;
        })
        .text(function(d){ return d.thing; })
        .transition()//启动过渡
        .duration(2000)//过渡的持续时间，单位毫秒
        .ease("bounce")//过渡的方式：linear：线性变化，circle：慢慢的到达终态，elastic：弹跳的到达，bounce：在终态处弹跳
        .delay(500)
        .attr("x",function(d){
            return d.x-d.weight;
        })
        .attr("y",function(d){
            return d.y;
        });
    node.select("circle")
        .on('click',function(d){
            self.location.href="http://127.0.0.1:5000/hh";
        })

</script>
</body>
</html>