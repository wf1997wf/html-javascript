<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>eg3</title>
    <script>
        function disappear(i)
        {
            if(i<8)
            {
                var x=document.getElementsByName(i);
                for(var j=0;j<x.length;j++)
                {
                    x.item(j).src = i+".svg";
                }
                document.getElementById("t"+i).style.display="none";
            }
            else
            {
                var x=document.getElementsByName(document.getElementById("p"+i).name);
                for(var j=0;j<x.length;j++)
                {
                    x.item(j).src = document.getElementById("p"+i).name+".svg";
                }
                document.getElementById("t"+document.getElementById("p"+i).name).style.display="none";
            }
        }
        function show(i)
        {
            if(i<8)
            {
                var x=document.getElementsByName(i);
                for(var j=0;j<x.length;j++)
                {
                    x.item(j).src = i+"_2.svg";
                }
                document.getElementById("t"+i).style.display = "block";
            }
            else
            {
                var x=document.getElementsByName(document.getElementById("p"+i).name);
                for(var j=0;j<x.length;j++)
                {
                    x.item(j).src = document.getElementById("p"+i).name+"_2.svg";
                }
                document.getElementById("t"+document.getElementById("p"+i).name).style.display = "block";
            }
        }
        function get()
        {
            var data=new Array(0.1,0.1,0.1,0.1,0.3,0.2,0.1);
            document.getElementById("t1").innerHTML="农民："+data[0];
            document.getElementById("t2").innerHTML="工人："+data[1];
            document.getElementById("t3").innerHTML="服务业："+data[2];
            document.getElementById("t4").innerHTML="经商："+data[3];
            document.getElementById("t5").innerHTML="家务："+data[4];
            document.getElementById("t6").innerHTML="教师："+data[5];
            document.getElementById("t7").innerHTML="其他："+data[6];
            return data;
        }
        function minlist(a)
        {
            var data=new Array(1,2,3,4,5,6,7);
            for(var j=0;j<a.length-1;j++)
            {
                for(var i=0; i<a.length-1-j;i++)
                {
                    if(a[i]>a[i+1])
                    {
                        var temp=a[i];
                        a[i]=a[i+1];
                        a[i+1]=temp;
                        var temp1=data[i];
                        data[i]=data[i+1];
                        data[i+1]=temp1;
                    }
                }
            }
            var b=new Array(a,data);
            return b;
        }
        function dividep(p,t,c)
        {
            var top=c[1];
            var left=c[0];
            var bottom=c[1];
            var right=c[0];
            while(p>0.00001)
            {
                document.getElementById("p"+c[0]+c[1]).src=t+".svg";
                document.getElementById("p"+c[0]+c[1]).name=t;

                p=p-0.05;
                bottom=c[1];
                right=c[0];

                if(c[2]==0)
                {
                    if(c[0]==5)
                    {
                        c[1]=c[1]+1;
                        c[2]=1;
                        c[0]=5;
                    }
                    else
                    {
                        c[0]=c[0]+1;
                    }
                }
                else
                {
                    if(c[0]==1)
                    {
                        c[1]=c[1]+1;
                        c[2]=0;
                        c[0]=1;
                    }
                    else
                    {
                        c[0]=c[0]-1;
                    }
                }

                if(c[1]==5 || p==0)
                {
                    break;
                }
            }
            if(top==bottom)
            {
                document.getElementById("p"+t).style.top=(100*top+25)+"px";
                document.getElementById("p"+t).style.left=( ((Math.abs(left-right)+1)*100-100)/2+Math.min(right,left)*100+250 )+"px";
            }
            else
            {
                document.getElementById("p"+t).style.top=((100*(bottom-top+1)-100)/2+25+100*top)+"px";
                if((bottom-top)>1)
                {
                    document.getElementById("p"+t).style.left="600px";
                }
                else
                {
                    if(top%2==0)
                    {
                        document.getElementById("p"+t).style.left=( ((Math.abs(left-right)+1)*100-100)/2+Math.min(right,left)*100+250-(Math.min(right,left)-1)*50 )+"px";
                    }
                    else
                    {
                        document.getElementById("p"+t).style.left=( ((Math.abs(left-right)+1)*100-100)/2+Math.min(right,left)*100+250+(5-Math.max(right,left))*50 )+"px";
                    }
                }
            }
            return c;
        }
        function init()
        {
            var datas=minlist(get());
            var datat=datas[1];
            var datap=datas[0];
            var lr=[1,1,0];//left ; line ; isasc 0 asc 1 desc
            for(var i=0;i<datat.length;i++)
            {
                lr=dividep(datap[i],datat[i],lr);
            }

        }
    </script>
</head>
<body>

    <div style="position:relative">
        <img id="background" border="0" src="0.jpg" alt="no picture" width="1200" height="600"/>

        <div id="11" style="position:absolute;left:350px;top:100px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p11" name="1" src="1.svg" width="100" height="100"/>
        </div>
        <div id="12" style="position:absolute;left:350px;top:200px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p12" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="13" style="position:absolute;left:350px;top:300px;" onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p13" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="14" style="position:absolute;left:350px;top:400px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p14" name="1" src="1.svg" width="100" height="100"/>
        </div>

        <div id="21" style="position:absolute;left:450px;top:100px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p21" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="22" style="position:absolute;left:450px;top:200px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p22" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="23" style="position:absolute;left:450px;top:300px;" onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p23" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="24" style="position:absolute;left:450px;top:400px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p24" name="1" src="1.svg" width="100" height="100"/>
        </div>

        <div id="31" style="position:absolute;left:550px;top:100px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p31" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="32" style="position:absolute;left:550px;top:200px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p32" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="33" style="position:absolute;left:550px;top:300px;" onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p33" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="34" style="position:absolute;left:550px;top:400px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p34" name="1" src="1.svg" width="100" height="100"/>
        </div>

        <div id="41" style="position:absolute;left:650px;top:100px;" onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p41" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="42" style="position:absolute;left:650px;top:200px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p42" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="43" style="position:absolute;left:650px;top:300px;" onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p43" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="44" style="position:absolute;left:650px;top:400px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p44" name="1" src="1.svg" width="100" height="100"/>
        </div>

        <div id="51" style="position:absolute;left:750px;top:100px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p51" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="52" style="position:absolute;left:750px;top:200px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p52" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="53" style="position:absolute;left:750px;top:300px;" onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p53" name="1" src="1.svg" width="100" height="100">
        </div>
        <div id="54" style="position:absolute;left:750px;top:400px;"onmouseover="show(this.id)" onmouseout="disappear(this.id)">
            <img id="p54" name="1" src="1.svg" width="100" height="100"/>
        </div>

        <div id="p1" style="position:absolute;left:470px;top:250px;"onmouseover="show(1)" onmouseout="disappear(1)">
            <p style="display:none;color:red;font-size:20px;" id="t1">农民：10%</p>
        </div>
        <div id="p2" style="position:absolute;left:650px;top:300px;"onmouseover="show(2)" onmouseout="disappear(2)">
            <p style="display:none;color:red;font-size:20px;" id="t2">工人：10%</p>
        </div>
        <div id="p3" style="position:absolute;left:470px;top:250px;"onmouseover="show(3)" onmouseout="disappear(3)">
            <p style="display:none;color:red;font-size:20px;" id="t3">服务业：10%</p>
        </div>
        <div id="p4" style="position:absolute;left:650px;top:300px;"onmouseover="show(4)" onmouseout="disappear(4)">
            <p style="display:none;color:red;font-size:20px;" id="t4">经商：10%</p>
        </div>
        <div id="p5" style="position:absolute;left:470px;top:250px;"onmouseover="show(5)" onmouseout="disappear(5)">
            <p style="display:none;color:red;font-size:20px;" id="t5">家务：10%</p>
        </div>
        <div id="p6" style="position:absolute;left:650px;top:300px;"onmouseover="show(6)" onmouseout="disappear(6)">
            <p style="display:none;color:red;font-size:20px;" id="t6">教师：10%</p>
        </div>
        <div id="p7" style="position:absolute;left:470px;top:250px;"onmouseover="show(7)" onmouseout="disappear(7)">
            <p style="display:none;color:red;font-size:20px;" id="t7">其他：10%</p>
        </div>

    </div>

    <script>
        init();
    </script>
</body>
</html>